
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dbdicom.create &#8212; dbdicom 0.2.4 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=6ffd866b"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/dbdicom/create';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/dbd.png" class="logo__image only-light" alt="dbdicom 0.2.4 documentation - Home"/>
    <img src="../../_static/dbd.png" class="logo__image only-dark pst-js-only" alt="dbdicom 0.2.4 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../generated/examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../developers_guide/index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user_guide/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../generated/examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../developers_guide/index.html">
    Developer guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/QIB-Sheffield/dbdicom" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Module code</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">dbdicom.create</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for dbdicom.create</h1><div class="highlight"><pre>
<span></span><span class="c1"># Importing annotations to handle or sign in import type hints</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">Manager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.types.database</span><span class="w"> </span><span class="kn">import</span> <span class="n">Database</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.types.patient</span><span class="w"> </span><span class="kn">import</span> <span class="n">Patient</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.types.study</span><span class="w"> </span><span class="kn">import</span> <span class="n">Study</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.types.series</span><span class="w"> </span><span class="kn">import</span> <span class="n">Series</span><span class="p">,</span> <span class="n">_coords_size</span><span class="p">,</span> <span class="n">_grid_to_coords</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dbdicom.types.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">Instance</span>


<span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="o">=</span><span class="s1">&#39;Database&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">uid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">uid</span> <span class="o">==</span> <span class="s1">&#39;Database&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Database</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># This case is included for convenience but should be avoided </span>
    <span class="c1"># at all costs because the lookup of type at creation is very expensive.</span>
    <span class="c1"># Considering removing and make type a requirement</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Patient&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Patient</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Study&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Study</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Series&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Series</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;Instance&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Instance</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">manager</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">key</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<div class="viewcode-block" id="database">
<a class="viewcode-back" href="../../generated/api/dbdicom.database.html#dbdicom.database">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">database</span><span class="p">(</span><span class="n">path</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Database</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;create a new database in memory or open an existing one on disk.</span>

<span class="sd">    Args:</span>
<span class="sd">        path (str, optional): path to an existing database. In case none is provided, this will create a new empty database.</span>
<span class="sd">        kwargs: any valid DICOM (tag, value) pair can be provided as keyword argument. These attributes will be assigned to the database and inherited by all DICOM objects later saved in the database.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Database: Instance of the Database class.</span>

<span class="sd">    Note:</span>
<span class="sd">        If no path is provided, a new database is created in memory. Any changes or additions to that database will only exist in memory until the new database is saved with .save().</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~series`</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>

<span class="sd">        Create a new database in memory and print the contents:</span>

<span class="sd">        &gt;&gt;&gt; database = db.database()</span>
<span class="sd">        &gt;&gt;&gt; database.print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">        ----------------------------------</span>

<span class="sd">        Open an existing DICOM database and check the contents (in this example we are using an edited version of a RIDER dataset case):</span>

<span class="sd">        &gt;&gt;&gt; database = db.database(&#39;path\\to\\RIDER\\case&#39;)</span>
<span class="sd">        &gt;&gt;&gt; database.print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  path\to\DICOM\database</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 014 [sag 3d gre +c]</span>
<span class="sd">                    Nr of instances: 176</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 017 [sag 3d flair +c]</span>
<span class="sd">                    Nr of instances: 210</span>
<span class="sd">            Study BRAIN^RESEARCH [19040321]</span>
<span class="sd">                Series 005 [ax tensor]</span>
<span class="sd">                    Nr of instances: 468</span>
<span class="sd">                Series 006 [ax 5 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 007 [ax 10 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 008 [ax 15 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 009 [ax 20 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 010 [ax 25 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 011 [ax 30 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 012 [perfusion]</span>
<span class="sd">                    Nr of instances: 1040</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 017 [sag 3d flair +c]</span>
<span class="sd">                    Nr of instances: 160</span>
<span class="sd">                Series 018 [sag 3d flair +c_Copy]</span>
<span class="sd">                    Nr of instances: 160</span>
<span class="sd">                Series 019 [MergedSeries]</span>
<span class="sd">                    Nr of instances: 320</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 005 [ax tensor]</span>
<span class="sd">                    Nr of instances: 468</span>
<span class="sd">                Series 006 [ax 5 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 007 [ax 10 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 008 [ax 15 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 009 [ax 20 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 010 [ax 25 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 011 [ax 30 flip]</span>
<span class="sd">                    Nr of instances: 16</span>
<span class="sd">                Series 012 [perfusion]</span>
<span class="sd">                    Nr of instances: 1040</span>
<span class="sd">            Study BRAIN^RESEARCH [19040323]</span>
<span class="sd">                Series 015 [sag 3d gre +c]</span>
<span class="sd">                    Nr of instances: 176</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mgr</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mgr</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">mgr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Database</span><span class="p">(</span><span class="n">create</span><span class="p">,</span> <span class="n">mgr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </div>



<div class="viewcode-block" id="patient">
<a class="viewcode-back" href="../../generated/api/dbdicom.patient.html#dbdicom.patient">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">patient</span><span class="p">(</span><span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Patient</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM patient record.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_database (Database, optional): If provided, the patient is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Study: DICOM patient with defaults for all attributes.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~series`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty patient in memory:</span>

<span class="sd">        &gt;&gt;&gt; patient = db.patient()</span>
<span class="sd">        &gt;&gt;&gt; patient.print()</span>
<span class="sd">        ---------- PATIENT -------------</span>
<span class="sd">        Patient New Patient</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient object is provided, a default database is created automatically.</span>

<span class="sd">        &gt;&gt;&gt; patient.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">            Patient New Patient</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">in_database</span>
    <span class="n">patient</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">new_patient</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">patient</span></div>



<div class="viewcode-block" id="study">
<a class="viewcode-back" href="../../generated/api/dbdicom.study.html#dbdicom.study">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">study</span><span class="p">(</span><span class="n">in_patient</span><span class="p">:</span><span class="n">Patient</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Study</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM study record.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_patient (Patient, optional): If provided, the study is created in this Patient. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the study is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new study</span>

<span class="sd">    Returns:</span>
<span class="sd">        Study: DICOM study with defaults for all attributes.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~series`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty study in memory:</span>

<span class="sd">        &gt;&gt;&gt; study = db.study()</span>
<span class="sd">        &gt;&gt;&gt; study.print()</span>
<span class="sd">        ---------- STUDY ---------------</span>
<span class="sd">        Study New Study [None]</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient object is provided, a default hierarchy is created automatically:</span>

<span class="sd">        &gt;&gt;&gt; study.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">            Patient New Patient</span>
<span class="sd">                Study New Study [None]</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">in_patient</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">in_patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="n">in_database</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">new_patient</span><span class="p">()</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">study</span></div>



<div class="viewcode-block" id="series">
<a class="viewcode-back" href="../../generated/api/dbdicom.series.html#dbdicom.series">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="n">in_study</span><span class="p">:</span><span class="n">Study</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Series</span><span class="p">:</span> 
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create an empty DICOM series.</span>

<span class="sd">    Args:</span>
<span class="sd">        dtype (str, optional): The type of the series to create. Defaults to &#39;mri&#39;.</span>
<span class="sd">        in_study (Study, optional): If provided, the series is created in this study. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the series is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with defaults for all attributes.</span>
<span class="sd"> </span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if a dtype is requested that is currently not yet implemented</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~database`</span>
<span class="sd">        :func:`~patient`</span>
<span class="sd">        :func:`~study`</span>
<span class="sd">        :func:`~as_series`</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create an empty series in memory. </span>

<span class="sd">        &gt;&gt;&gt; series = db.series()</span>
<span class="sd">        &gt;&gt;&gt; series.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 0</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Note since no patient and study records are provided, a default hierarchy is created automatically:</span>

<span class="sd">        &gt;&gt;&gt; series.database().print()</span>
<span class="sd">        ---------- DATABASE --------------</span>
<span class="sd">        Location:  In memory</span>
<span class="sd">        Patient New Patient</span>
<span class="sd">            Study New Study [None]</span>
<span class="sd">                Series 001 [New Series]</span>
<span class="sd">                    Nr of instances: 0</span>
<span class="sd">        ----------------------------------</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="s1">&#39;MRImage&#39;</span><span class="p">]:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;dbdicom can only create images of type MRImage at this stage&#39;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">in_study</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">in_study</span><span class="o">.</span><span class="n">new_series</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_database</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
            <span class="n">_database</span><span class="o">.</span><span class="n">mute</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_database</span> <span class="o">=</span> <span class="n">in_database</span>
        <span class="n">patient</span> <span class="o">=</span> <span class="n">_database</span><span class="o">.</span><span class="n">new_patient</span><span class="p">()</span>
        <span class="n">study</span> <span class="o">=</span> <span class="n">patient</span><span class="o">.</span><span class="n">new_study</span><span class="p">()</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">study</span><span class="o">.</span><span class="n">new_series</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">in_database</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_database</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">series</span></div>





<div class="viewcode-block" id="as_series">
<a class="viewcode-back" href="../../generated/api/dbdicom.as_series.html#dbdicom.as_series">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridcoords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="n">in_study</span><span class="p">:</span><span class="n">Study</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series from a numpy array.</span>

<span class="sd">    Args:</span>
<span class="sd">        array (np.ndarray): numpy.ndarray with image data</span>
<span class="sd">        coords (dict, optional): Dictionary with coordinate labels and values. For 3- or 4-dimensional arrays this is optional but for arrays with more than 4 dimensions either *coords* or *gridcoords* are required. </span>
<span class="sd">        gridcoords (dict, optional): regularly gridded coordinates can also be provided as a coordinate grid.</span>
<span class="sd">        dtype (str, optional): The type of the series to create. Defaults to &#39;mri&#39;.</span>
<span class="sd">        in_study (Study, optional): If provided, the series is created in this study. Defaults to None.</span>
<span class="sd">        in_database (Database, optional): If provided, the series is created in this database. Defaults to None.</span>
<span class="sd">        kwargs: Any valid DICOM (tag, value) pair to set properties of the new patient</span>

<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series containing the provided array as image data and defaults for all other parameters.</span>
<span class="sd"> </span>
<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if a dtype is requested that is currently not yet implemented</span>
<span class="sd">        ValueError: If the coords do not match up with the shape of the array.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~series`</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array. Since the default format is single-frame MRImage, this produces 6 separate files.</span>

<span class="sd">        &gt;&gt;&gt; array = np.zeros((128, 128, 3, 2))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6 </span>
<span class="sd">                MRImage 000001   </span>
<span class="sd">                MRImage 000002   </span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        Since no coordinates are provided, these are assumed to be SliceLocation and AcquisitionTime with default values:</span>

<span class="sd">        &gt;&gt;&gt; print(zeros.SliceLocation)</span>
<span class="sd">        [0.0, 1.0, 2.0]</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.AcquisitionTime)</span>
<span class="sd">        [0.0, 1.0]</span>

<span class="sd">        To override these defaults, set coordinates explicitly using a dictionary. For instance, for an MRI series of images acquired at a single slice location for 3 flip angles and 2 repetition times, the coordinates of the series are:</span>

<span class="sd">        &gt;&gt;&gt; coords = {</span>
<span class="sd">        ...    &#39;FlipAngle&#39;: [2, 15, 30],</span>
<span class="sd">        ...    &#39;RepetitionTime&#39;: [2.5, 5.0],</span>
<span class="sd">        ... }</span>

<span class="sd">        Now create another series, providing coordinates, and list the unique values of flip angle and repetition time:</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array, coords)</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.FlipAngle)</span>
<span class="sd">        [2.0, 15.0, 30.0]</span>
<span class="sd">        &gt;&gt;&gt; print(zeros.RepetitionTime)</span>
<span class="sd">        [2.5, 5.0]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">shape</span> <span class="o">=</span> <span class="n">array</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">gridcoords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;With more than 4 dimensions, the coords argument is required.&#39;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">gridcoords</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">gridcoords</span><span class="p">[</span><span class="s1">&#39;InstanceNumber&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">gridcoords</span><span class="p">[</span><span class="s1">&#39;SliceLocation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">gridcoords</span><span class="p">[</span><span class="s1">&#39;AcquisitionTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">gridcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">_grid_to_coords</span><span class="p">(</span><span class="n">gridcoords</span><span class="p">)</span>
    <span class="n">sery</span> <span class="o">=</span> <span class="n">series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="n">in_study</span><span class="o">=</span><span class="n">in_study</span><span class="p">,</span> <span class="n">in_database</span><span class="o">=</span><span class="n">in_database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">set_pixel_values</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">coords</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">sery</span></div>



<div class="viewcode-block" id="empty_series">
<a class="viewcode-back" href="../../generated/api/dbdicom.empty_series.html#dbdicom.empty_series">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">empty_series</span><span class="p">(</span><span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridcoords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="n">in_study</span><span class="p">:</span><span class="n">Study</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">in_database</span><span class="p">:</span><span class="n">Database</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">Series</span><span class="p">:</span>

    <span class="k">if</span> <span class="n">gridcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">_grid_to_coords</span><span class="p">(</span><span class="n">gridcoords</span><span class="p">)</span>
    <span class="n">sery</span> <span class="o">=</span> <span class="n">series</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="n">in_study</span><span class="o">=</span><span class="n">in_study</span><span class="p">,</span> <span class="n">in_database</span><span class="o">=</span><span class="n">in_database</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">coords</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sery</span>
    <span class="n">sery</span><span class="o">.</span><span class="n">expand</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sery</span></div>



<div class="viewcode-block" id="zeros">
<a class="viewcode-back" href="../../generated/api/dbdicom.zeros.html#dbdicom.zeros">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridcoords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series populated with zeros.</span>

<span class="sd">    This is a convenience wrapper providing a numpy-like interface for :func:`~as_series`.</span>

<span class="sd">    Args:</span>
<span class="sd">        shape (tuple): shape of the array</span>
<span class="sd">        kwargs: see :func:`~series`</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with zero values</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~ones`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array of zeros:</span>

<span class="sd">        &gt;&gt;&gt; zeros = db.zeros((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6</span>
<span class="sd">                MRImage 000001</span>
<span class="sd">                MRImage 000002</span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        This is effectively shorthand for:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; array = np.zeros((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">gridcoords</span><span class="o">=</span><span class="n">gridcoords</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>



<div class="viewcode-block" id="ones">
<a class="viewcode-back" href="../../generated/api/dbdicom.ones.html#dbdicom.ones">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">coords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gridcoords</span><span class="p">:</span><span class="nb">dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a DICOM series populated with ones.</span>

<span class="sd">    This is a convenience wrapper providing a numpy-like interface for :func:`~as_series`.</span>

<span class="sd">    Args:</span>
<span class="sd">        shape (tuple): shape of the array</span>
<span class="sd">        kwargs: see :func:`~series`</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        Series: DICOM series with values of one.</span>

<span class="sd">    See Also:</span>
<span class="sd">        :func:`~zeros`</span>

<span class="sd">    Example:</span>
<span class="sd">        Create a series containing a 4-dimensional array of ones:</span>

<span class="sd">        &gt;&gt;&gt; zeros = db.ones((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros.print()</span>
<span class="sd">        ---------- SERIES --------------</span>
<span class="sd">        Series 001 [New Series]</span>
<span class="sd">            Nr of instances: 6</span>
<span class="sd">                MRImage 000001</span>
<span class="sd">                MRImage 000002</span>
<span class="sd">                MRImage 000003</span>
<span class="sd">                MRImage 000004</span>
<span class="sd">                MRImage 000005</span>
<span class="sd">                MRImage 000006</span>
<span class="sd">        --------------------------------</span>

<span class="sd">        This is effectively shorthand for:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; array = np.ones((128, 128, 2, 3))</span>
<span class="sd">        &gt;&gt;&gt; zeros = db.as_series(array)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">as_series</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">,</span> <span class="n">gridcoords</span><span class="o">=</span><span class="n">gridcoords</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

</pre></div>

                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022-2025, QIB-Sheffield.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>